
  <view class="container">
    
  <view class="list">

    <view  wx:for="{{$list$topics}}" wx:key="{{$list$id}}">
      <view class="topic">
        <view class="userInfo" id="{{item.member.username}}" bindtap="$list$toProfile">
          <image src="{{item.member.avatar_normal}}" style="height:30px;width:30px;"/>
          <text>{{item.member.username}}</text>
        </view>
        <view class="topicTitle" id="{{item.id}}" bindtap="$list$toDetail">
          <text>{{item.title}}</text>
        </view>
        <view class="footerInfo">
          <text>{{item.replies}}条回复</text>
          <text>{{item.node.title}}</text>
        </view>
      </view>
    </view>

<script>
  var util = require('../libs/utils')
  import wepy from 'wepy'

  export default class TopicList extends wepy.component {
    data = {
      topics: [
      ]
    }

    events = {
    }

    methods = {
      tap () {
        // this.num = this.num + 1
        console.log(this.$name + ' tap')
      },
      add () {
        let len = this.list.length
        this.list.push({id: len + 1, title: 'title_' + len})
      }
    }

    onLoad () {
      util.getRequestData({
        url: 'https://www.v2ex.com/api/topics/hot.json',
        cb: (res) => {
          this.topics = res.data
          this.$apply() // 没办法啊，异步空间了，咱手动通知哈view层，数据改变了。
        }
      })
    }
    toDetail (e) {
      wepy.navigateTo({
        url: '/pages/detail?id=' + e.currentTarget.id
      })
    }
  }
</script></view>
    
    <view class="wetoast {{$toast$reveal ? 'wetoast_show' : ''}}">
        <view class="wetoast__mask"/>
        <view class="wetoast__bd" animation="{{$toast$animationData}}">
            <block  wx:if="{{$toast$img}}">
                <view class="wetoast__bd__img {{$toast$imgClassName || ''}}">
                    <image class="wetoast__bd__img_desc" src="{{$toast$img}}" mode="{{$toast$imgMode || 'scaleToFill'}}"/>
                </view>
            </block>
            <block  wx:if="{{$toast$title}}">
                <view class="wetoast__bd__title {{$toast$titleClassName || ''}}">{{$toast$title}}</view>
            </block>
        </view>
    </view>

  </view>